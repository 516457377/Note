# 工作日常

#### 1. 在系统应用Launch中，关于一些页面定制的修改。

![img1](/Android/工作日常/img1.jpg)
![img2](/Android/工作日常/img2.jpg)
修改，hotseatIcon（应用）大小，主页面边距，主页面默认图标，默认控件，应用页面数量、图标大小等。  

    com.android.launcher3.InvariantDeviceProfile
    <span class="hljs-comment">//文件地址</span>

        InvariantDeviceProfile(String n, <span class="hljs-keyword">float</span> w, <span class="hljs-keyword">float</span> h, <span class="hljs-keyword">int</span> r, <span class="hljs-keyword">int</span> c, <span class="hljs-keyword">int</span> fr, <span class="hljs-keyword">int</span> fc, <span class="hljs-keyword">int</span> maapc,
            <span class="hljs-keyword">float</span> <span class="hljs-keyword">is</span>, <span class="hljs-keyword">float</span> its, <span class="hljs-keyword">float</span> hs, <span class="hljs-keyword">float</span> his, <span class="hljs-keyword">int</span> dlId) {
        <span class="hljs-comment">// Ensure that we have an odd number of hotseat items (since we need to place all apps)</span>
        <span class="hljs-keyword">if</span> (hs % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>) {
            <span class="hljs-function"><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title">RuntimeException</span><span class="hljs-params">(<span class="hljs-string">"All Device Profiles must have an odd number of hotseat spaces"</span>)</span></span>;
        }

        name = n;<span class="hljs-comment">//参数配置名</span>
        minWidthDps = w;
        minHeightDps = h;<span class="hljs-comment">//影响主页和应用页图标(icon)大小，有可能是图标之间的间距，没具体测试过</span>
        numRows = r; <span class="hljs-comment">//主页可用行数，1就是只能一行。图一这样/</span>
        numColumns = c;<span class="hljs-comment">//主页可用列数，一行可显示的图标</span>
        numFolderRows = fr;
        numFolderColumns = fc;<span class="hljs-comment">//文件夹可显示的行列数，将两个图标拖到一起就会合并成一个文件夹。</span>
        minAllAppsPredictionColumns = maapc;<span class="hljs-comment">//所有应用程序中预测的最小应用程序数量。(实际上我不知道用来干嘛的)</span>
        iconSize = <span class="hljs-keyword">is</span>;
        iconTextSize = its;<span class="hljs-comment">//影响主页和应用页图标大小和字体大小</span>
        numHotseatIcons = hs;<span class="hljs-comment">//收藏栏可用数量，就是在主页固定的icon，显示在应用icon两边。</span>
        hotseatIconSize = his;<span class="hljs-comment">//应用图标大小。</span>
        defaultLayoutId = dlId;<span class="hljs-comment">//默认主页显示图标，在xml中定义，具体见下</span>

        <span class="hljs-keyword">if</span>(Build.ID.startsWith(<span class="hljs-string">"ADP002A_KANGHAI"</span>)){
            hotseatIconSize = <span class="hljs-number">60</span>;
            numHotseatIcons = <span class="hljs-number">1</span>;
            numRows = <span class="hljs-number">1</span>;
            numColumns = <span class="hljs-number">9</span>;
            numFolderRows = <span class="hljs-number">1</span>;
            numFolderColumns = <span class="hljs-number">2</span>;
            defaultLayoutId = R.xml.default_workspace_kanghai;
        }
    }
    `</pre>

    这些参数本来应该在`如下`中修改的，但是因为我不知道具体会引用哪一个，所以我统一修改了。

    <pre>`ArrayList<span class="hljs-subst"><</span>InvariantDeviceProfile<span class="hljs-subst">></span> getPredefinedDeviceProfiles() {
        ArrayList<span class="hljs-subst"><</span>InvariantDeviceProfile<span class="hljs-subst">></span> predefinedDeviceProfiles <span class="hljs-subst">=</span> <span class="hljs-literal">new</span> ArrayList<span class="hljs-subst"><></span>();
        <span class="hljs-comment">// width, height, #rows, #columns, #folder rows, #folder columns,</span>
        <span class="hljs-comment">// iconSize, iconTextSize, #hotseat, #hotseatIconSize, defaultLayoutId.</span>
        predefinedDeviceProfiles<span class="hljs-built_in">.</span>add(<span class="hljs-literal">new</span> InvariantDeviceProfile(<span class="hljs-string">"Super Short Stubby"</span>,
                <span class="hljs-number">255</span>, <span class="hljs-number">300</span>,     <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">48</span>, <span class="hljs-number">13</span>, <span class="hljs-number">3</span>, <span class="hljs-number">48</span>, R<span class="hljs-built_in">.</span><span class="hljs-built_in">xml</span><span class="hljs-built_in">.</span>default_workspace_4x4));
        predefinedDeviceProfiles<span class="hljs-built_in">.</span>add(<span class="hljs-literal">new</span> InvariantDeviceProfile(<span class="hljs-string">"Shorter Stubby"</span>,
                <span class="hljs-number">255</span>, <span class="hljs-number">400</span>,     <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">48</span>, <span class="hljs-number">13</span>, <span class="hljs-number">3</span>, <span class="hljs-number">48</span>, R<span class="hljs-built_in">.</span><span class="hljs-built_in">xml</span><span class="hljs-built_in">.</span>default_workspace_4x4));
        predefinedDeviceProfiles<span class="hljs-built_in">.</span>add(<span class="hljs-literal">new</span> InvariantDeviceProfile(<span class="hljs-string">"Short Stubby"</span>,
                <span class="hljs-number">275</span>, <span class="hljs-number">420</span>,     <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">48</span>, <span class="hljs-number">13</span>, <span class="hljs-number">5</span>, <span class="hljs-number">48</span>, R<span class="hljs-built_in">.</span><span class="hljs-built_in">xml</span><span class="hljs-built_in">.</span>default_workspace_4x4));
        predefinedDeviceProfiles<span class="hljs-built_in">.</span>add(<span class="hljs-literal">new</span> InvariantDeviceProfile(<span class="hljs-string">"Stubby"</span>,
                <span class="hljs-number">255</span>, <span class="hljs-number">450</span>,     <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">48</span>, <span class="hljs-number">13</span>, <span class="hljs-number">5</span>, <span class="hljs-number">48</span>, R<span class="hljs-built_in">.</span><span class="hljs-built_in">xml</span><span class="hljs-built_in">.</span>default_workspace_4x4));
        predefinedDeviceProfiles<span class="hljs-built_in">.</span>add(<span class="hljs-literal">new</span> InvariantDeviceProfile(<span class="hljs-string">"Nexus S"</span>,
                <span class="hljs-number">296</span>, <span class="hljs-number">491.33</span>f, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">48</span>, <span class="hljs-number">13</span>, <span class="hljs-number">5</span>, <span class="hljs-number">48</span>, R<span class="hljs-built_in">.</span><span class="hljs-built_in">xml</span><span class="hljs-built_in">.</span>default_workspace_4x4));
        predefinedDeviceProfiles<span class="hljs-built_in">.</span>add(<span class="hljs-literal">new</span> InvariantDeviceProfile(<span class="hljs-string">"Nexus 4"</span>,
                <span class="hljs-number">335</span>, <span class="hljs-number">567</span>,     <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, DEFAULT_ICON_SIZE_DP, <span class="hljs-number">13</span>, <span class="hljs-number">5</span>, <span class="hljs-number">56</span>, R<span class="hljs-built_in">.</span><span class="hljs-built_in">xml</span><span class="hljs-built_in">.</span>default_workspace_4x4));
        predefinedDeviceProfiles<span class="hljs-built_in">.</span>add(<span class="hljs-literal">new</span> InvariantDeviceProfile(<span class="hljs-string">"Nexus 5"</span>,
                <span class="hljs-number">359</span>, <span class="hljs-number">567</span>,     <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, DEFAULT_ICON_SIZE_DP, <span class="hljs-number">13</span>, <span class="hljs-number">5</span>, <span class="hljs-number">56</span>, R<span class="hljs-built_in">.</span><span class="hljs-built_in">xml</span><span class="hljs-built_in">.</span>default_workspace_4x4));
        predefinedDeviceProfiles<span class="hljs-built_in">.</span>add(<span class="hljs-literal">new</span> InvariantDeviceProfile(<span class="hljs-string">"Large Phone"</span>,
                <span class="hljs-number">406</span>, <span class="hljs-number">694</span>,     <span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">64</span>, <span class="hljs-number">14.4</span>f,  <span class="hljs-number">5</span>, <span class="hljs-number">56</span>, R<span class="hljs-built_in">.</span><span class="hljs-built_in">xml</span><span class="hljs-built_in">.</span>default_workspace_5x5));
        <span class="hljs-comment">// The tablet profile is odd in that the landscape orientation</span>
        <span class="hljs-comment">// also includes the nav bar on the side</span>
        int forceLand <span class="hljs-subst">=</span> <span class="hljs-built_in">Integer</span><span class="hljs-built_in">.</span>valueOf(SystemPropertiesUtil<span class="hljs-built_in">.</span>getString(<span class="hljs-string">"mstar.forcelandscape"</span>, <span class="hljs-string">"0"</span>));
        <span class="hljs-keyword">Log</span><span class="hljs-built_in">.</span>e(<span class="hljs-string">""</span>, <span class="hljs-string">"forceLand="</span> <span class="hljs-subst">+</span> forceLand <span class="hljs-subst">+</span> <span class="hljs-string">",orientation="</span> <span class="hljs-subst">+</span> orientation);
        <span class="hljs-keyword">if</span> (orientation <span class="hljs-subst">==</span> Configuration<span class="hljs-built_in">.</span>ORIENTATION_PORTRAIT <span class="hljs-subst">||</span> forceLand <span class="hljs-subst">==</span> <span class="hljs-number">2</span>) {
            predefinedDeviceProfiles<span class="hljs-built_in">.</span>add(<span class="hljs-literal">new</span> InvariantDeviceProfile(<span class="hljs-string">"Nexus 7"</span>,
                    <span class="hljs-number">575</span>, <span class="hljs-number">904</span>,     <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">66</span>, <span class="hljs-number">18</span>,  <span class="hljs-number">7</span>, <span class="hljs-number">66</span>, R<span class="hljs-built_in">.</span><span class="hljs-built_in">xml</span><span class="hljs-built_in">.</span>default_workspace_5x6_p));
        }<span class="hljs-keyword">else</span>{
            predefinedDeviceProfiles<span class="hljs-built_in">.</span>add(<span class="hljs-literal">new</span> InvariantDeviceProfile(<span class="hljs-string">"Nexus 7"</span>,
                    <span class="hljs-number">575</span>, <span class="hljs-number">904</span>,     <span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">66</span>, <span class="hljs-number">20</span>,  <span class="hljs-number">7</span>, <span class="hljs-number">66</span>, R<span class="hljs-built_in">.</span><span class="hljs-built_in">xml</span><span class="hljs-built_in">.</span>default_workspace_5x6));
        }
        <span class="hljs-comment">// Larger tablet profiles always have system bars on the top & bottom</span>
        predefinedDeviceProfiles<span class="hljs-built_in">.</span>add(<span class="hljs-literal">new</span> InvariantDeviceProfile(<span class="hljs-string">"Nexus 10"</span>,
                <span class="hljs-number">727</span>, <span class="hljs-number">1207</span>,    <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">76</span>, <span class="hljs-number">14.4</span>f,  <span class="hljs-number">7</span>, <span class="hljs-number">64</span>, R<span class="hljs-built_in">.</span><span class="hljs-built_in">xml</span><span class="hljs-built_in">.</span>default_workspace_5x6));
        predefinedDeviceProfiles<span class="hljs-built_in">.</span>add(<span class="hljs-literal">new</span> InvariantDeviceProfile(<span class="hljs-string">"20-inch Tablet"</span>,
                <span class="hljs-number">1527</span>, <span class="hljs-number">2527</span>,   <span class="hljs-number">7</span>, <span class="hljs-number">7</span>, <span class="hljs-number">6</span>, <span class="hljs-number">6</span>, <span class="hljs-number">4</span>, <span class="hljs-number">100</span>, <span class="hljs-number">20</span>,  <span class="hljs-number">7</span>, <span class="hljs-number">72</span>, R<span class="hljs-built_in">.</span><span class="hljs-built_in">xml</span><span class="hljs-built_in">.</span>default_workspace_4x4));
        <span class="hljs-keyword">return</span> predefinedDeviceProfiles;
    }
    `</pre>

     默认主页设置样例。

    <pre>` <span class="hljs-tag"><<span class="hljs-title">favorites</span> <span class="hljs-attribute">xmlns:launcher</span>=<span class="hljs-value">"http://schemas.android.com/apk/res-auto/com.android.launcher3"</span>></span>
        <span class="hljs-comment"><!-- Far-left screen [0] --></span>

        <span class="hljs-comment"><!-- Left screen [1] --></span>
        <span class="hljs-tag"><<span class="hljs-title">appwidget</span>
            <span class="hljs-attribute">launcher:packageName</span>=<span class="hljs-value">"com.android.settings"</span>
            <span class="hljs-attribute">launcher:className</span>=<span class="hljs-value">"com.android.settings.widget.SettingsAppWidgetProvider"</span>
            <span class="hljs-attribute">launcher:screen</span>=<span class="hljs-value">"1"</span>
            <span class="hljs-attribute">launcher:x</span>=<span class="hljs-value">"0"</span>
            <span class="hljs-attribute">launcher:y</span>=<span class="hljs-value">"3"</span>
            <span class="hljs-attribute">launcher:spanX</span>=<span class="hljs-value">"4"</span>
            <span class="hljs-attribute">launcher:spanY</span>=<span class="hljs-value">"1"</span> /></span>

        <span class="hljs-comment"><!-- Middle screen [2] --></span>
        <span class="hljs-tag"><<span class="hljs-title">appwidget</span>
            <span class="hljs-attribute">launcher:packageName</span>=<span class="hljs-value">"com.android.deskclock"</span>
            <span class="hljs-attribute">launcher:className</span>=<span class="hljs-value">"com.android.alarmclock.AnalogAppWidgetProvider"</span>
            <span class="hljs-attribute">launcher:screen</span>=<span class="hljs-value">"2"</span>
            <span class="hljs-attribute">launcher:x</span>=<span class="hljs-value">"1"</span>
            <span class="hljs-attribute">launcher:y</span>=<span class="hljs-value">"0"</span>
            <span class="hljs-attribute">launcher:spanX</span>=<span class="hljs-value">"2"</span>
            <span class="hljs-attribute">launcher:spanY</span>=<span class="hljs-value">"2"</span> /></span>
        <span class="hljs-tag"><<span class="hljs-title">favorite</span>
            <span class="hljs-attribute">launcher:packageName</span>=<span class="hljs-value">"com.android.camera"</span>
            <span class="hljs-attribute">launcher:className</span>=<span class="hljs-value">"com.android.camera.Camera"</span>
            <span class="hljs-attribute">launcher:screen</span>=<span class="hljs-value">"2"</span>
            <span class="hljs-attribute">launcher:x</span>=<span class="hljs-value">"0"</span>
            <span class="hljs-attribute">launcher:y</span>=<span class="hljs-value">"3"</span> /></span>

        <span class="hljs-comment"><!-- Right screen [3] --></span>
        <span class="hljs-tag"><<span class="hljs-title">favorite</span>
            <span class="hljs-attribute">launcher:packageName</span>=<span class="hljs-value">"com.android.gallery3d"</span>
            <span class="hljs-attribute">launcher:className</span>=<span class="hljs-value">"com.android.gallery3d.app.Gallery"</span>
            <span class="hljs-attribute">launcher:screen</span>=<span class="hljs-value">"3"</span>
            <span class="hljs-attribute">launcher:x</span>=<span class="hljs-value">"1"</span>
            <span class="hljs-attribute">launcher:y</span>=<span class="hljs-value">"3"</span> /></span>
        <span class="hljs-tag"><<span class="hljs-title">favorite</span>
            <span class="hljs-attribute">launcher:packageName</span>=<span class="hljs-value">"com.android.settings"</span>
            <span class="hljs-attribute">launcher:className</span>=<span class="hljs-value">"com.android.settings.Settings"</span>
            <span class="hljs-attribute">launcher:screen</span>=<span class="hljs-value">"3"</span>
            <span class="hljs-attribute">launcher:x</span>=<span class="hljs-value">"2"</span>
            <span class="hljs-attribute">launcher:y</span>=<span class="hljs-value">"3"</span> /></span>

        <span class="hljs-comment"><!-- Far-right screen [4] --></span>

        <span class="hljs-comment"><!-- Hotseat (We use the screen as the position of the item in the hotseat) --></span>
        <span class="hljs-comment"><!-- Dialer, Contacts, [All Apps], Messaging, Browser --></span>
        <span class="hljs-tag"><<span class="hljs-title">resolve</span>
            <span class="hljs-attribute">launcher:container</span>=<span class="hljs-value">"-101"</span>
            <span class="hljs-attribute">launcher:screen</span>=<span class="hljs-value">"0"</span>
            <span class="hljs-attribute">launcher:x</span>=<span class="hljs-value">"0"</span>
            <span class="hljs-attribute">launcher:y</span>=<span class="hljs-value">"0"</span> ></span>
            <span class="hljs-tag"><<span class="hljs-title">favorite</span> <span class="hljs-attribute">launcher:uri</span>=<span class="hljs-value">"#Intent;action=android.intent.action.DIAL;end"</span> /></span>
            <span class="hljs-tag"><<span class="hljs-title">favorite</span> <span class="hljs-attribute">launcher:uri</span>=<span class="hljs-value">"tel:123"</span> /></span>
            <span class="hljs-tag"><<span class="hljs-title">favorite</span> <span class="hljs-attribute">launcher:uri</span>=<span class="hljs-value">"#Intent;action=android.intent.action.CALL_BUTTON;end"</span> /></span>

            <span class="hljs-tag"><<span class="hljs-title">favorite</span>
                <span class="hljs-attribute">launcher:packageName</span>=<span class="hljs-value">"com.android.dialer"</span>
                <span class="hljs-attribute">launcher:className</span>=<span class="hljs-value">"com.android.dialer.DialtactsActivity"</span> /></span>
        <span class="hljs-tag"></<span class="hljs-title">resolve</span>></span>

        <span class="hljs-tag"><<span class="hljs-title">favorite</span>
            <span class="hljs-attribute">launcher:packageName</span>=<span class="hljs-value">"com.android.contacts"</span>
            <span class="hljs-attribute">launcher:className</span>=<span class="hljs-value">"com.android.contacts.activities.PeopleActivity"</span>
            <span class="hljs-attribute">launcher:container</span>=<span class="hljs-value">"-101"</span>
            <span class="hljs-attribute">launcher:screen</span>=<span class="hljs-value">"1"</span>
            <span class="hljs-attribute">launcher:x</span>=<span class="hljs-value">"1"</span>
            <span class="hljs-attribute">launcher:y</span>=<span class="hljs-value">"0"</span> /></span>

        <span class="hljs-tag"><<span class="hljs-title">resolve</span>
            <span class="hljs-attribute">launcher:container</span>=<span class="hljs-value">"-101"</span>
            <span class="hljs-attribute">launcher:screen</span>=<span class="hljs-value">"3"</span>
            <span class="hljs-attribute">launcher:x</span>=<span class="hljs-value">"3"</span>
            <span class="hljs-attribute">launcher:y</span>=<span class="hljs-value">"0"</span> ></span>
            <span class="hljs-tag"><<span class="hljs-title">favorite</span>
                <span class="hljs-attribute">launcher:uri</span>=<span class="hljs-value">"#Intent;action=android.intent.action.MAIN;category=android.intent.category.APP_MESSAGING;end"</span> /></span>
            <span class="hljs-tag"><<span class="hljs-title">favorite</span> <span class="hljs-attribute">launcher:uri</span>=<span class="hljs-value">"sms:"</span> /></span>
            <span class="hljs-tag"><<span class="hljs-title">favorite</span> <span class="hljs-attribute">launcher:uri</span>=<span class="hljs-value">"smsto:"</span> /></span>
            <span class="hljs-tag"><<span class="hljs-title">favorite</span> <span class="hljs-attribute">launcher:uri</span>=<span class="hljs-value">"mms:"</span> /></span>
            <span class="hljs-tag"><<span class="hljs-title">favorite</span> <span class="hljs-attribute">launcher:uri</span>=<span class="hljs-value">"mmsto:"</span> /></span>

            <span class="hljs-tag"><<span class="hljs-title">favorite</span>
                <span class="hljs-attribute">launcher:packageName</span>=<span class="hljs-value">"com.android.mms"</span>
                <span class="hljs-attribute">launcher:className</span>=<span class="hljs-value">"com.android.mms.ui.ConversationList"</span> /></span>
        <span class="hljs-tag"></<span class="hljs-title">resolve</span>></span>
        <span class="hljs-tag"><<span class="hljs-title">resolve</span>
            <span class="hljs-attribute">launcher:container</span>=<span class="hljs-value">"-101"</span>
            <span class="hljs-attribute">launcher:screen</span>=<span class="hljs-value">"4"</span>
            <span class="hljs-attribute">launcher:x</span>=<span class="hljs-value">"4"</span>
            <span class="hljs-attribute">launcher:y</span>=<span class="hljs-value">"0"</span> ></span>
            <span class="hljs-tag"><<span class="hljs-title">favorite</span>
                <span class="hljs-attribute">launcher:uri</span>=<span class="hljs-value">"#Intent;action=android.intent.action.MAIN;category=android.intent.category.APP_BROWSER;end"</span> /></span>
            <span class="hljs-tag"><<span class="hljs-title">favorite</span> <span class="hljs-attribute">launcher:uri</span>=<span class="hljs-value">"http://www.example.com/"</span> /></span>

            <span class="hljs-tag"><<span class="hljs-title">favorite</span>
                <span class="hljs-attribute">launcher:packageName</span>=<span class="hljs-value">"com.android.browser"</span>
                <span class="hljs-attribute">launcher:className</span>=<span class="hljs-value">"com.android.browser.BrowserActivity"</span> /></span>
        <span class="hljs-tag"></<span class="hljs-title">resolve</span>></span>

    <span class="hljs-tag"></<span class="hljs-title">favorites</span>></span>
    `</pre>

    * * *

     设置工作区间大小。

    <pre>` com.android.launcher3.DeviceProfile

        <span class="hljs-comment">/** Returns the search bar bounds in the current orientation */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Rect <span class="hljs-title">getSearchBarBounds</span><span class="hljs-params">(boolean isLayoutRtl)</span> </span>{
        Rect bounds = <span class="hljs-keyword">new</span> Rect();
        <span class="hljs-keyword">if</span> (isLandscape && transposeLayoutWithOrientation) {
            <span class="hljs-keyword">if</span> (isLayoutRtl) {
                bounds.<span class="hljs-keyword">set</span>(availableWidthPx - searchBarSpaceHeightPx, edgeMarginPx,
                        availableWidthPx, availableHeightPx - edgeMarginPx);
            } <span class="hljs-keyword">else</span> {
                bounds.<span class="hljs-keyword">set</span>(<span class="hljs-number">0</span>, edgeMarginPx, searchBarSpaceHeightPx,
                        availableHeightPx - edgeMarginPx);
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (isTablet) {
                <span class="hljs-comment">// Pad the left and right of the workspace to ensure consistent spacing</span>
                <span class="hljs-comment">// between all icons</span>
                <span class="hljs-keyword">int</span> width = getCurrentWidth();
                <span class="hljs-comment">// XXX: If the icon size changes across orientations, we will have to take</span>
                <span class="hljs-comment">//      that into account here too.</span>
                <span class="hljs-keyword">int</span> gap = (<span class="hljs-keyword">int</span>) ((width - <span class="hljs-number">2</span> * edgeMarginPx -
                        (inv.numColumns * cellWidthPx)) / (<span class="hljs-number">2</span> * (inv.numColumns + <span class="hljs-number">1</span>)));
                bounds.<span class="hljs-keyword">set</span>(edgeMarginPx + gap, getSearchBarTopOffset(),
                        availableWidthPx - (edgeMarginPx + gap),
                        searchBarSpaceHeightPx);
            } <span class="hljs-keyword">else</span> {
                bounds.<span class="hljs-keyword">set</span>(desiredWorkspaceLeftRightMarginPx - defaultWidgetPadding.left,
                        getSearchBarTopOffset(),
                        availableWidthPx - (desiredWorkspaceLeftRightMarginPx -
                        defaultWidgetPadding.right), searchBarSpaceHeightPx);
            }
        }
        <span class="hljs-keyword">return</span> bounds;<span class="hljs-comment">//返回的这个区间就是大小了，上左右下，具体演算我没去看，直接自己设置固定值。</span>
    }
    `</pre>

    * * *

    #### 2. 设置了OVERSCAN top参数之后，工作、应用空间出现多余的间隔。

    ![img3](/Android/工作日常/img3.jpg)
    出现这种问题，我怀疑应该是一个BUG，设置了值之后就会出现多一倍的空余空间出来。

    解决办法，找了好几天之后终于还是被我找到了，在`Workspace.java`里面有一个矩形空间`mInsets`，发现里面的值刚刚就是overscan的值，尝试改了一下发现果然有效，但是并不全面然后全局搜索了一下。发现还有三个位置，先后调用顺序分别为：

    <pre>`com<span class="hljs-class">.android</span><span class="hljs-class">.launcher3</span><span class="hljs-class">.InsettableFrameLayout</span><span class="hljs-comment">//最先调用</span>
    com<span class="hljs-class">.android</span><span class="hljs-class">.launcher3</span><span class="hljs-class">.Workspace</span><span class="hljs-comment">//第二</span>
    com<span class="hljs-class">.android</span><span class="hljs-class">.launcher3</span><span class="hljs-class">.BaseContainerView</span><span class="hljs-comment">//第三</span>
    `</pre>

    在这三个类里面都有着类似的这个方法，后面测试发现只要改第一个里面的值后面也会相应影响，第一个（InsettableFrameLayout）在哪调用的就不得而知了。

    <pre>`    <span class="hljs-annotation">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setInsets</span><span class="hljs-params">(Rect insets)</span> </span>{
    <span class="hljs-comment">//        Log.d("TTTTTTTTTTTT", "3333333"+insets.top);</span>
    <span class="hljs-comment">//        insets.top = 0;</span>
        <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> n = getChildCount();
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i < n; i++) {
            <span class="hljs-keyword">final</span> View child = getChildAt(i);
            setFrameLayoutChildInsets(child, insets, mInsets);
        }
        mInsets.set(insets);
    }
    